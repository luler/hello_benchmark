(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[794],{61806:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return BaseComponent}});var C_work_hello_benchmark_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(69610),C_work_hello_benchmark_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(54941),C_work_hello_benchmark_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(63543),C_work_hello_benchmark_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(94663),C_work_hello_benchmark_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(81306),C_work_hello_benchmark_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(96688),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294),BaseComponent=function(_Component){(0,C_work_hello_benchmark_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_1__.Z)(BaseComponent,_Component);var _super=(0,C_work_hello_benchmark_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_2__.Z)(BaseComponent);function BaseComponent(){return(0,C_work_hello_benchmark_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.Z)(this,BaseComponent),_super.apply(this,arguments)}return(0,C_work_hello_benchmark_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__.Z)(BaseComponent,[{key:"setStateSimple",value:function(key,value,callback){var _this=this,keyArr=key.split("."),state={},stateEval="state";keyArr.map(function(v,i){stateEval="".concat(stateEval,"['").concat(v,"']"),i===0?state[v]=_this.state[v]||{}:eval("".concat(stateEval," = ").concat(stateEval," || {}"))}),stateEval="".concat(stateEval,"=value"),eval(stateEval),(0,C_work_hello_benchmark_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5__.Z)((0,C_work_hello_benchmark_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__.Z)(BaseComponent.prototype),"setState",this).call(this,state,callback)}}]),BaseComponent}(react__WEBPACK_IMPORTED_MODULE_0__.Component)},47753:function(U,E,e){"use strict";e.r(E),e.d(E,{default:function(){return T}});var j=e(8963),P=e(24559),k=e(47673),v=e(1011),m=e(8870),S=e(49111),O=e(19650),w=e(88983),u=e(47933),y=e(62350),M=e(75443),x=e(48736),f=e(27049),Z=e(57663),C=e(71577),z=e(34792),r=e(48086),F=e(71194),p=e(50146),G=e(71153),c=e(60331),B=e(69610),I=e(54941),R=e(81306),K=e(96688),H=e(67294),i=e(99424),g=e(61806),A=e(37406),_=e(85893),T=function(L){(0,R.Z)(d,L);var D=(0,K.Z)(d);function d(){var l;(0,B.Z)(this,d);for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];return l=D.call.apply(D,[this].concat(a)),l.state={param:{page:1,page_rows:10},list:[],total:0,visible:!1,temp_data:{},loading:!1,interval:0},l.columns=[{title:"ID",dataIndex:"id"},{title:"\u538B\u6D4B\u5BF9\u8C61\u540D\u79F0",dataIndex:"title",width:200},{title:"\u65E5\u5FD7\u4FE1\u606F",dataIndex:"content",width:600,render:function(n){return(0,_.jsx)("div",{dangerouslySetInnerHTML:{__html:n}})}},{title:"\u8BF7\u6C42\u603B\u6570",dataIndex:"request_count"},{title:"\u5931\u8D25\u603B\u6570",dataIndex:"fail_count"},{title:"\u541E\u5410\u7387",dataIndex:"request_rate"},{title:"\u72B6\u6001",dataIndex:"status",render:function(n){return[(0,_.jsx)(c.Z,{color:"#2db7f5",children:"\u7B49\u5F85\u6267\u884C"}),(0,_.jsx)(c.Z,{color:"#108ee9",children:"\u6B63\u5728\u6267\u884C\u4E2D"}),(0,_.jsx)(c.Z,{color:"#87d068",children:"\u6267\u884C\u5B8C\u6210"}),(0,_.jsx)(c.Z,{children:"\u5DF2\u53D6\u6D88"})][n]}},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"create_time"},{title:"\u64CD\u4F5C",render:function(n){return(0,_.jsxs)("div",{children:[(0,_.jsx)(C.Z,{type:"link",size:"small",disabled:n.status!==0,onClick:function(){p.Z.confirm({title:"\u63D0\u793A",content:"\u60A8\u786E\u5B9A\u8981\u53D6\u6D88\u5417\uFF1F",onOk:function(){(0,i.sz)("/api/cancelBenchmark",{ids:[n.id]}).then(function(b){b.code===200&&(r.default.success(b.message),l.fetch())})}})},children:"\u53D6\u6D88"}),(0,_.jsx)(f.Z,{type:"vertical"}),(0,_.jsx)(M.Z,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",onConfirm:function(){(0,i.sz)("/api/delRequestsRecord",{ids:[n.id]}).then(function(h){h.code===200&&(r.default.success(h.message),l.fetch())})},children:(0,_.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})})]})}}],l}return(0,I.Z)(d,[{key:"componentDidMount",value:function(){var t=this;this.setStateSimple("param.request_id",(0,A.Wz)("request_id"),function(){t.fetch()})}},{key:"fetch",value:function(t){var a=this;this.setState({loading:t!=null?t:!0},function(){(0,i.MY)("/api/getRequestsRecordList",a.state.param).then(function(s){if(a.setStateSimple("list",s.info.list),a.setStateSimple("total",s.info.total),a.setStateSimple("loading",!1),s.info.list.findIndex(function(n){return n.status===0||n.status===1})===-1)a.state.interval>0&&(clearInterval(a.state.interval),a.setStateSimple("interval",0));else if(a.state.interval===0){var o=a;a.setStateSimple("interval",setInterval(function(){o.fetch(!1)},3e3))}})})}},{key:"submitParam",value:function(t,a,s){var o=this;this.setStateSimple("loading_sumit",!0,function(){(0,i.sz)("/api/saveParams",{request_id:t,type:a,data:s}).then(function(n){n.code===200&&(r.default.success(n.message),o.fetch()),o.setStateSimple("loading_sumit",!1)})})}},{key:"render",value:function(){var t=this;return(0,_.jsxs)("div",{children:[(0,_.jsxs)("div",{style:{background:"white",padding:20,margin:"20px 0",height:70},children:[(0,_.jsxs)(O.Z,{size:"middle",children:[(0,_.jsx)(C.Z,{type:"danger",onClick:function(){if(!t.state.selectedRowKeys||t.state.selectedRowKeys.length===0){r.default.warning("\u8BF7\u9009\u62E9\u9700\u8981\u5220\u9664\u7684\u9879\u76EE");return}p.Z.confirm({title:"\u63D0\u793A",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u9009\u4E2D\u9879\u76EE\u5417\uFF1F",onOk:function(){(0,i.sz)("/api/delRequestsRecord",{ids:t.state.selectedRowKeys}).then(function(o){o.code===200&&(r.default.success("\u5220\u9664\u6210\u529F"),t.fetch())})}})},children:"\u5220\u9664\u9009\u4E2D"}),(0,_.jsx)("span",{children:"\u72B6\u6001:"}),(0,_.jsxs)(u.ZP.Group,{defaultValue:"",onChange:function(s){t.setStateSimple("param.status",s.target.value,function(){t.fetch()})},children:[(0,_.jsx)(u.ZP,{value:"",defaultChecked:!0,children:"\u5168\u90E8"}),(0,_.jsx)(u.ZP,{value:"0",children:"\u7B49\u5F85\u6267\u884C"}),(0,_.jsx)(u.ZP,{value:"1",children:"\u6B63\u5728\u6267\u884C\u4E2D"}),(0,_.jsx)(u.ZP,{value:"2",children:"\u6267\u884C\u5B8C\u6210"}),(0,_.jsx)(u.ZP,{value:"3",children:"\u5DF2\u53D6\u6D88"})]})]}),(0,_.jsx)(v.Z.Search,{style:{width:500,float:"right"},allowClear:!0,placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u5B57",onSearch:function(s){t.setState({param:(0,m.Z)((0,m.Z)({},t.state.param),{},{search:s,page:1})},function(){t.fetch()})}})]}),(0,_.jsx)(P.Z,{onChange:function(s){t.setState({param:(0,m.Z)((0,m.Z)({},t.state.param),{},{page:s.current,page_rows:s.pageSize})},function(){t.fetch()})},pagination:{showSizeChanger:!0,current:this.state.param.page,total:this.state.total,pageSize:this.state.param.page_rows,showTotal:function(s){return(0,_.jsxs)("div",{children:["\u603B\u5171 ",s," \u6761\u6570\u636E"]})}},rowSelection:{selectedRowKeys:this.state.selectedRowKeys||[],onChange:function(s){t.setStateSimple("selectedRowKeys",s)}},loading:this.state.loading,rowKey:"id",dataSource:this.state.list,columns:this.columns})]})}}]),d}(g.Z)}}]);
