(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[951],{61806:function(__unused_webpack_module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{Z:function(){return BaseComponent}});var C_work_hello_benchmark_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(69610),C_work_hello_benchmark_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(54941),C_work_hello_benchmark_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(63543),C_work_hello_benchmark_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(94663),C_work_hello_benchmark_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(81306),C_work_hello_benchmark_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(96688),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(67294),BaseComponent=function(_Component){(0,C_work_hello_benchmark_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_1__.Z)(BaseComponent,_Component);var _super=(0,C_work_hello_benchmark_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_2__.Z)(BaseComponent);function BaseComponent(){return(0,C_work_hello_benchmark_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__.Z)(this,BaseComponent),_super.apply(this,arguments)}return(0,C_work_hello_benchmark_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__.Z)(BaseComponent,[{key:"setStateSimple",value:function(key,value,callback){var _this=this,keyArr=key.split("."),state={},stateEval="state";keyArr.map(function(v,i){stateEval="".concat(stateEval,"['").concat(v,"']"),i===0?state[v]=_this.state[v]||{}:eval("".concat(stateEval," = ").concat(stateEval," || {}"))}),stateEval="".concat(stateEval,"=value"),eval(stateEval),(0,C_work_hello_benchmark_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_get__WEBPACK_IMPORTED_MODULE_5__.Z)((0,C_work_hello_benchmark_code_web_node_modules_umijs_babel_preset_umi_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__.Z)(BaseComponent.prototype),"setState",this).call(this,state,callback)}}]),BaseComponent}(react__WEBPACK_IMPORTED_MODULE_0__.Component)},3559:function(te,k,n){"use strict";n.r(k),n.d(k,{default:function(){return q}});var ae=n(43358),y=n(34041),ne=n(88983),c=n(47933),se=n(8963),K=n(24559),le=n(18106),g=n(90642),ue=n(49111),P=n(19650),ie=n(9715),u=n(41003),A=n(93224),re=n(47673),r=n(1011),o=n(8870),oe=n(62350),W=n(75443),de=n(48736),L=n(27049),ce=n(57663),m=n(71577),me=n(34792),v=n(48086),he=n(71194),j=n(50146),_e=n(71153),z=n(60331),U=n(69610),V=n(54941),G=n(81306),H=n(96688),S=n(67294),f=n(99424),N=n(61806),B=n(28991),Y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M696 480H328c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h368c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8z"}},{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}}]},name:"minus-circle",theme:"outlined"},J=Y,w=n(27029),I=function(x,h){return S.createElement(w.Z,(0,B.Z)((0,B.Z)({},x),{},{ref:h,icon:J}))};I.displayName="MinusCircleOutlined";var M=S.forwardRef(I),Q={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},X=Q,T=function(x,h){return S.createElement(w.Z,(0,B.Z)((0,B.Z)({},x),{},{ref:h,icon:X}))};T.displayName="SaveOutlined";var F=S.forwardRef(T),R=n(49101),$=n(37406),e=n(85893),q=function(D){(0,G.Z)(h,D);var x=(0,H.Z)(h);function h(){var d;(0,U.Z)(this,h);for(var a=arguments.length,s=new Array(a),t=0;t<a;t++)s[t]=arguments[t];return d=x.call.apply(x,[this].concat(s)),d.state={param:{page:1,page_rows:10},list:[],total:0,visible:!1,temp_data:{},loading:!1,interval:0},d.columns=[{title:"ID",dataIndex:"id"},{title:"\u540D\u79F0",width:200,render:function(l){return(0,e.jsx)("a",{onClick:function(){d.setStateSimple("temp_data",l,function(){d.setStateSimple("visible",!0)})},children:l.title})}},{title:"\u7C7B\u578B",dataIndex:"type"},{title:"ip/\u57DF\u540D",dataIndex:"host"},{title:"\u7AEF\u53E3",dataIndex:"port"},{title:"\u8DEF\u5F84",dataIndex:"path"},{title:"\u538B\u6D4B\u6301\u7EED\u65F6\u95F4",render:function(l){return(0,e.jsxs)("div",{children:[(0,e.jsx)(z.Z,{children:l.driver}),l.duration]})}},{title:"\u6A21\u62DF\u7528\u6237\u6570\u91CF",dataIndex:"connect_count"},{title:"\u8D85\u65F6\u8BBE\u7F6E",dataIndex:"timeout"},{title:"\u541E\u5410\u7387",render:function(l){return(0,e.jsx)("a",{title:"\u70B9\u51FB\u67E5\u770B\u538B\u6D4B\u5386\u53F2",onClick:function(){window.location.href=(0,$.a9)("/requests/record?request_id="+l.id)},children:l.request_rate})}},{title:"\u64CD\u4F5C",width:180,render:function(l){return(0,e.jsxs)("div",{children:[(0,e.jsx)(m.Z,{loading:l.status===0||l.status===1,size:"small",type:"link",onClick:function(){j.Z.confirm({title:"\u63D0\u793A",content:"\u60A8\u786E\u5B9A\u8981\u542F\u52A8\u538B\u6D4B\u5417\uFF1F",onOk:function(){(0,f.sz)("/api/startBenchmark",{ids:[l.id]}).then(function(Z){Z.code===200&&(v.default.success(Z.message),d.fetch())})}})},children:"\u542F\u52A8\u538B\u6D4B"}),(0,e.jsx)(L.Z,{type:"vertical"}),(0,e.jsx)(W.Z,{title:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",onConfirm:function(){(0,f.sz)("/api/delBenchmark",{ids:[l.id]}).then(function(E){E.code===200&&(v.default.success("\u5220\u9664\u6210\u529F"),d.fetch())})},children:(0,e.jsx)("a",{style:{color:"red"},children:"\u5220\u9664"})})]})}}],d}return(0,V.Z)(h,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"fetch",value:function(a){var s=this;this.setState({loading:a!=null?a:!0},function(){(0,f.MY)("/api/getRequestsList",s.state.param).then(function(t){if(s.setStateSimple("list",t.info.list),s.setStateSimple("total",t.info.total),s.setStateSimple("loading",!1),t.info.list.findIndex(function(l){return l.status===0||l.status===1})===-1)s.state.interval>0&&(clearInterval(s.state.interval),s.setStateSimple("interval",0));else if(s.state.interval===0){var i=s;s.setStateSimple("interval",setInterval(function(){i.fetch(!1)},3e3))}})})}},{key:"submitParam",value:function(a,s,t){var i=this;this.setStateSimple("loading_sumit",!0,function(){(0,f.sz)("/api/saveParams",{request_id:a,type:s,data:t}).then(function(l){l.code===200&&(v.default.success(l.message),i.fetch()),i.setStateSimple("loading_sumit",!1)})})}},{key:"render",value:function(){var a=this;return(0,e.jsxs)("div",{children:[(0,e.jsxs)("div",{style:{background:"white",padding:20,margin:"20px 0"},children:[(0,e.jsx)(m.Z,{type:"danger",onClick:function(){if(!a.state.selectedRowKeys||a.state.selectedRowKeys.length===0){v.default.warning("\u8BF7\u9009\u62E9\u9700\u8981\u5220\u9664\u7684\u9879\u76EE");return}j.Z.confirm({title:"\u63D0\u793A",content:"\u60A8\u786E\u5B9A\u8981\u5220\u9664\u9009\u4E2D\u9879\u76EE\u5417\uFF1F",onOk:function(){(0,f.sz)("/api/delBenchmark",{ids:a.state.selectedRowKeys}).then(function(i){i.code===200&&(v.default.success("\u5220\u9664\u6210\u529F"),a.fetch())})}})},children:"\u5220\u9664\u9009\u4E2D"}),"\xA0 \xA0",(0,e.jsx)(m.Z,{type:"primary",onClick:function(){a.setStateSimple("visible",!0),a.setStateSimple("temp_data",{type:"GET",driver:"co",connect_count:500,timeout:10,duration:10,scheme:"http",port:80,path:"/"})},children:"\u6DFB\u52A0"}),"\xA0 \xA0",(0,e.jsx)(m.Z,{type:"primary",onClick:function(){if(!a.state.selectedRowKeys||a.state.selectedRowKeys.length===0){v.default.warning("\u8BF7\u9009\u62E9\u9700\u8981\u542F\u52A8\u538B\u6D4B\u7684\u9879\u76EE");return}j.Z.confirm({title:"\u63D0\u793A",content:"\u60A8\u786E\u5B9A\u8981\u542F\u52A8\u9009\u4E2D\u7684\u9879\u76EE\u8FDB\u884C\u538B\u6D4B\u5417\uFF1F",onOk:function(){(0,f.sz)("/api/startBenchmark",{ids:a.state.selectedRowKeys}).then(function(i){i.code===200&&(v.default.success(i.message),a.fetch())})}})},children:"\u6279\u91CF\u542F\u52A8\u538B\u6D4B"}),(0,e.jsx)(r.Z.Search,{style:{width:500,float:"right"},allowClear:!0,placeholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5173\u952E\u5B57",onSearch:function(t){a.setState({param:(0,o.Z)((0,o.Z)({},a.state.param),{},{search:t,page:1})},function(){a.fetch()})}})]}),(0,e.jsx)(K.Z,{onChange:function(t){a.setState({param:(0,o.Z)((0,o.Z)({},a.state.param),{},{page:t.current,page_rows:t.pageSize})},function(){a.fetch()})},pagination:{showSizeChanger:!0,current:this.state.param.page,total:this.state.total,pageSize:this.state.param.page_rows,showTotal:function(t){return(0,e.jsxs)("div",{children:["\u603B\u5171 ",t," \u6761\u6570\u636E"]})}},rowSelection:{selectedRowKeys:this.state.selectedRowKeys||[],onChange:function(t){a.setStateSimple("selectedRowKeys",t)}},loading:this.state.loading,rowKey:"id",dataSource:this.state.list,columns:this.columns,expandable:{expandedRowRender:function(t){return(0,e.jsxs)(g.Z,{defaultActiveKey:"1",children:[(0,e.jsx)(g.Z.TabPane,{tab:"\u8BF7\u6C42\u53C2\u6570",children:(0,e.jsxs)(u.Z,{autoComplete:"off",onFinish:function(l){a.submitParam(t.id,1,l.param)},children:[(0,e.jsx)(u.Z.List,{name:"param",initialValue:t.param,children:function(l,_){var E=_.add,Z=_.remove;return(0,e.jsxs)(e.Fragment,{children:[l.map(function(p){var O=p.key,C=p.name,b=(0,A.Z)(p,["key","name"]);return(0,e.jsxs)(P.Z,{style:{display:"flex",marginBottom:8},align:"baseline",children:[(0,e.jsx)(u.Z.Item,(0,o.Z)((0,o.Z)({},b),{},{name:[C,"name"],rules:[{required:!0,message:"\u8BF7\u6C42\u53C2\u6570\u952E\u540D"}],children:(0,e.jsx)(r.Z,{style:{width:400},placeholder:"\u8BF7\u6C42\u53C2\u6570\u952E\u540D"})})),(0,e.jsx)(u.Z.Item,(0,o.Z)((0,o.Z)({},b),{},{name:[C,"value"],rules:[{required:!0,message:"\u8BF7\u6C42\u53C2\u6570\u952E\u503C"}],children:(0,e.jsx)(r.Z,{style:{width:400},placeholder:"\u8BF7\u6C42\u53C2\u6570\u952E\u503C"})})),(0,e.jsx)(M,{onClick:function(){return Z(C)}})]},O)}),(0,e.jsx)(u.Z.Item,{children:(0,e.jsx)(m.Z,{type:"dashed",onClick:function(){return E()},block:!0,icon:(0,e.jsx)(R.Z,{}),children:"\u6DFB\u52A0"})})]})}}),(0,e.jsx)(u.Z.Item,{children:(0,e.jsx)(m.Z,{loading:a.state.loading_sumit||!1,type:"primary",htmlType:"submit",icon:(0,e.jsx)(F,{}),style:{width:"100%"},children:"\u63D0\u4EA4"})})]})},"1"),(0,e.jsx)(g.Z.TabPane,{tab:"RAW\u53C2\u6570",children:(0,e.jsxs)(u.Z,{autoComplete:"off",onFinish:function(l){a.submitParam(t.id,2,l.raw)},children:[(0,e.jsx)(u.Z.Item,{name:"raw",initialValue:t.raw,children:(0,e.jsx)(r.Z.TextArea,{disabled:t.type==="GET",placeholder:"\u8BF7\u8F93\u5165",allowClear:!0,autoSize:{minRows:5}})}),(0,e.jsx)(m.Z,{disabled:t.type==="GET",loading:a.state.loading_sumit||!1,type:"primary",htmlType:"submit",icon:(0,e.jsx)(F,{}),style:{width:"100%"},children:"\u63D0\u4EA4"})]})},"2"),(0,e.jsx)(g.Z.TabPane,{tab:"\u8BF7\u6C42\u5934",children:(0,e.jsxs)(u.Z,{autoComplete:"off",onFinish:function(l){a.submitParam(t.id,3,l.header)},children:[(0,e.jsx)(u.Z.List,{name:"header",initialValue:t.header,children:function(l,_){var E=_.add,Z=_.remove;return(0,e.jsxs)(e.Fragment,{children:[l.map(function(p){var O=p.key,C=p.name,b=(0,A.Z)(p,["key","name"]);return(0,e.jsxs)(P.Z,{style:{display:"flex",marginBottom:8},align:"baseline",children:[(0,e.jsx)(u.Z.Item,(0,o.Z)((0,o.Z)({},b),{},{name:[C,"name"],rules:[{required:!0,message:"\u8BF7\u6C42\u5934\u952E\u540D"}],children:(0,e.jsx)(r.Z,{style:{width:400},placeholder:"\u8BF7\u6C42\u5934\u952E\u540D"})})),(0,e.jsx)(u.Z.Item,(0,o.Z)((0,o.Z)({},b),{},{name:[C,"value"],rules:[{required:!0,message:"\u8BF7\u6C42\u5934\u952E\u503C"}],children:(0,e.jsx)(r.Z,{style:{width:400},placeholder:"\u8BF7\u6C42\u5934\u952E\u503C"})})),(0,e.jsx)(M,{onClick:function(){return Z(C)}})]},O)}),(0,e.jsx)(u.Z.Item,{children:(0,e.jsx)(m.Z,{type:"dashed",onClick:function(){return E()},block:!0,icon:(0,e.jsx)(R.Z,{}),children:"\u6DFB\u52A0"})})]})}}),(0,e.jsx)(u.Z.Item,{children:(0,e.jsx)(m.Z,{loading:a.state.loading_sumit||!1,type:"primary",htmlType:"submit",icon:(0,e.jsx)(F,{}),style:{width:"100%"},children:"\u63D0\u4EA4"})})]})},"3")]})},rowExpandable:function(t){return!0}}}),(0,e.jsx)(j.Z,{width:700,title:"\u538B\u6D4B\u5BF9\u8C61\u4FE1\u606F",visible:this.state.visible,onCancel:function(){a.setStateSimple("visible",!1),a.setStateSimple("temp_data",{})},okButtonProps:{loading:this.state.loading_ok||!1},onOk:function(){a.setStateSimple("loading_ok",!0,function(){(0,f.sz)("/api/saveRequests",a.state.temp_data).then(function(t){t.code===200&&(v.default.success(t.message),a.setStateSimple("visible",!1),a.setStateSimple("temp_data",{}),a.fetch()),a.setStateSimple("loading_ok",!1)})})},children:(0,e.jsxs)(u.Z,{labelCol:{span:4},wrapperCol:{span:20},autoComplete:"off",children:[(0,e.jsx)(u.Z.Item,{label:"\u540D\u79F0",required:!0,children:(0,e.jsx)(r.Z,{placeholder:"\u8BF7\u8F93\u5165",onChange:function(t){a.setStateSimple("temp_data.title",t.target.value)},value:this.state.temp_data.title||""})}),(0,e.jsx)(u.Z.Item,{label:"\u7C7B\u578B",required:!0,children:(0,e.jsxs)(c.ZP.Group,{value:this.state.temp_data.type,onChange:function(t){t.target.value==="WEBSOCKET"&&a.setStateSimple("temp_data.driver","co"),a.setStateSimple("temp_data.type",t.target.value)},children:[(0,e.jsx)(c.ZP,{value:"GET",children:"GET"}),(0,e.jsx)(c.ZP,{value:"POST",children:"POST"}),(0,e.jsx)(c.ZP,{value:"PATCH",children:"PATCH"}),(0,e.jsx)(c.ZP,{value:"PUT",children:"PUT"}),(0,e.jsx)(c.ZP,{value:"DELETE",children:"DELETE"}),(0,e.jsx)(c.ZP,{value:"WEBSOCKET",children:"WEBSOCKET"})]})}),this.state.temp_data.type&&this.state.temp_data.type!=="WEBSOCKET"&&(0,e.jsx)(u.Z.Item,{label:"\u8BF7\u6C42\u534F\u8BAE",required:!0,children:(0,e.jsxs)(c.ZP.Group,{value:this.state.temp_data.scheme,onChange:function(t){a.setStateSimple("temp_data.scheme",t.target.value)},children:[(0,e.jsx)(c.ZP,{value:"http",children:"http"}),(0,e.jsx)(c.ZP,{value:"https",children:"https"})]})}),(0,e.jsx)(u.Z.Item,{label:"\u538B\u6D4B\u9A71\u52A8",required:!0,children:(0,e.jsxs)(y.Z,{value:this.state.temp_data.driver,onChange:function(t){a.setStateSimple("temp_data.driver",t)},children:[(0,e.jsx)(y.Z.Option,{value:"co",children:"swoole\u591A\u8FDB\u7A0B&\u534F\u7A0B"}),(0,e.jsx)(y.Z.Option,{value:"wrk",disabled:this.state.temp_data.type==="WEBSOCKET",children:"wrk\u591A\u7EBF\u7A0B\u538B\u6D4B\u5DE5\u5177"})]})}),(0,e.jsx)(u.Z.Item,{label:"\u538B\u6D4B\u6301\u7EED\u65F6\u95F4",required:!0,children:(0,e.jsx)(r.Z,{type:"number",placeholder:"\u8BF7\u8F93\u5165",onChange:function(t){a.setStateSimple("temp_data.duration",t.target.value)},value:this.state.temp_data.duration||"",addonAfter:"\u79D2"})}),(0,e.jsx)(u.Z.Item,{label:"ip/\u57DF\u540D",required:!0,children:(0,e.jsx)(r.Z,{placeholder:"\u8BF7\u8F93\u5165",onChange:function(t){a.setStateSimple("temp_data.host",t.target.value)},value:this.state.temp_data.host||""})}),(0,e.jsx)(u.Z.Item,{label:"\u7AEF\u53E3",required:!0,children:(0,e.jsx)(r.Z,{type:"number",placeholder:"\u8BF7\u8F93\u5165",onChange:function(t){a.setStateSimple("temp_data.port",t.target.value)},value:this.state.temp_data.port||""})}),(0,e.jsx)(u.Z.Item,{label:"\u8DEF\u5F84",required:!0,children:(0,e.jsx)(r.Z,{placeholder:"\u8BF7\u8F93\u5165",onChange:function(t){a.setStateSimple("temp_data.path",t.target.value)},value:this.state.temp_data.path||""})}),(0,e.jsx)(u.Z.Item,{label:"\u6A21\u62DF\u7528\u6237",required:!0,children:(0,e.jsx)(r.Z,{type:"number",placeholder:"\u8BF7\u8F93\u5165",onChange:function(t){a.setStateSimple("temp_data.connect_count",t.target.value)},value:this.state.temp_data.connect_count||"",addonAfter:"\u5E76\u53D1"})}),(0,e.jsx)(u.Z.Item,{label:"\u8D85\u65F6\u8BBE\u7F6E",tooltip:"\u5F53\u4E00\u4E2A\u8BF7\u6C42\u7684\u54CD\u5E94\u65F6\u95F4\u5927\u4E8E\u8BE5\u503C\u65F6\uFF0C\u89C6\u4E3A\u8BF7\u6C42\u5931\u8D25\u3002\u6309\u5B9E\u9645\u9700\u6C42\uFF0C\u53EF\u9002\u5F53\u8C03\u6574\u8BE5\u53C2\u6570\u3002",required:!0,children:(0,e.jsx)(r.Z,{type:"number",placeholder:"\u8BF7\u8F93\u5165",onChange:function(t){a.setStateSimple("temp_data.timeout",t.target.value)},value:this.state.temp_data.timeout||"",addonAfter:"\u79D2"})})]})})]})}}]),h}(N.Z)}}]);
